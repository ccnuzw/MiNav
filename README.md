# MiNav - Cloudflare å¯¼èˆªä»ªè¡¨ç›˜

MiNav æ˜¯ä¸€ä¸ªåŸºäº Cloudflare æŠ€æœ¯æ ˆæ„å»ºçš„è½»é‡çº§ã€é«˜æ€§èƒ½å¯¼èˆªä»ªè¡¨ç›˜ã€‚å®ƒå…è®¸æ‚¨é€šè¿‡ç°ä»£åŒ–çš„å“åº”å¼ç•Œé¢ç®¡ç†å’Œå±•ç¤ºæ‚¨æœ€å–œçˆ±çš„å·¥å…·ã€æ–‡æ¡£å’Œèµ„æºé“¾æ¥ã€‚

## âœ¨ ç‰¹æ€§

- **Cloudflare åŸç”Ÿ**: åŸºäº Cloudflare Pages, D1 (æ•°æ®åº“), å’Œ KV (é”®å€¼å­˜å‚¨) æ„å»ºã€‚
- **åå°ç®¡ç†**: å®Œæ•´çš„å¢åˆ æ”¹æŸ¥ (CRUD) åŠŸèƒ½ï¼Œæ”¯æŒé¡¹ç›®ã€åˆ†ç±»ã€æ ‡ç­¾å’Œå‹æƒ…é“¾æ¥ç®¡ç†ã€‚
- **æ ‡ç­¾ç³»ç»Ÿ**: ä¸ºé¡¹ç›®æ·»åŠ å¤šå½©æ ‡ç­¾ï¼Œæ”¯æŒè‡ªå®šä¹‰é¢œè‰²å’Œå‰ç«¯ç­›é€‰åŠŸèƒ½ã€‚
- **å‹æƒ…é“¾æ¥**: åœ¨é¡µé¢åº•éƒ¨å±•ç¤ºå‹æƒ…é“¾æ¥ï¼Œå¸¦å›¾æ ‡å’Œæè¿°å±•ç¤ºã€‚
- **å›¾æ ‡é€‰æ‹©å™¨**: å†…ç½®å¤šç§å›¾æ ‡è·å–æ–¹å¼ï¼ˆUnavatar/Clearbit/Icon Horseï¼‰å’Œ FontAwesome æ”¯æŒã€‚
- **é»˜è®¤å›¾æ ‡è®¾ç½®**: å¯åœ¨ç«™ç‚¹è®¾ç½®ä¸­é…ç½®é¡¹ç›®é»˜è®¤å›¾æ ‡ï¼Œæœªè®¾ç½®å›¾æ ‡çš„é¡¹ç›®è‡ªåŠ¨ä½¿ç”¨é»˜è®¤å›¾æ ‡ã€‚
- **Material Icons**: åˆ†ç±»ç®¡ç†æ”¯æŒ Google Material Symbols å›¾æ ‡é€‰æ‹©ã€‚
- **åŠ¨æ€è®¾ç½®**: ç›´æ¥åœ¨åå°ç®¡ç†é¢æ¿è‡ªå®šä¹‰ç«™ç‚¹åç§°ã€æ ‡è¯­ã€ä¸»é¡µæ–‡æœ¬å’Œé»˜è®¤å›¾æ ‡ã€‚
- **å“åº”å¼è®¾è®¡**: ä½¿ç”¨ Vue 3, Tailwind CSS å’Œ FontAwesome/Material Symbols æ„å»ºçš„ç°ä»£åŒ– UIã€‚
- **æš—è‰²æ¨¡å¼**: æ”¯æŒäº®è‰²/æš—è‰²ä¸»é¢˜åˆ‡æ¢ã€‚
- **å®‰å…¨**: åå°ç®¡ç†åŒºåŸŸæä¾›åŸºç¡€çš„ä¼šè¯è®¤è¯ä¿æŠ¤ã€‚

## ğŸ›  æŠ€æœ¯æ ˆ

- **å‰ç«¯**: Vue 3, Vite, Tailwind CSS
- **åç«¯**: Cloudflare Pages Functions
- **æ•°æ®åº“**: Cloudflare D1 (SQLite)
- **å­˜å‚¨**: Cloudflare KV (ä¼šè¯ç®¡ç†)

## ğŸ“‹ å‰ç½®è¦æ±‚

- [Node.js](https://nodejs.org/) (v16.13.0 æˆ–æ›´é«˜ç‰ˆæœ¬)
- [Wrangler CLI](https://developers.cloudflare.com/workers/wrangler/install-and-update/) (`npm install -g wrangler`)
- ä¸€ä¸ª Cloudflare è´¦å·

## ğŸ’» æœ¬åœ°å¼€å‘

1. **å…‹éš†ä»“åº“**
   ```bash
   git clone <your-repo-url>
   cd MiNav
   ```

2. **å®‰è£…ä¾èµ–**
   ```bash
   npm install
   ```

3. **è®¾ç½®æœ¬åœ° D1 æ•°æ®åº“**
   åˆå§‹åŒ–æœ¬åœ° D1 æ•°æ®åº“ç»“æ„ï¼š
   ```bash
   npx wrangler d1 execute MINAV_DB --local --file=./schema.sql
   ```

4. **å¯åŠ¨å¼€å‘æœåŠ¡å™¨**
   ä½¿ç”¨ Wrangler å¯åŠ¨å¼€å‘æœåŠ¡å™¨ (æ¨¡æ‹Ÿ Cloudflare ç¯å¢ƒ)ï¼š
   ```bash
   npx wrangler pages dev .
   ```
   *æ³¨æ„: è®¿é—®åœ°å€ä¸º `http://localhost:8788`ã€‚*

5. **âš ï¸ åˆå§‹åŒ–ç®¡ç†å‘˜ (å¿…é¡»æ‰§è¡Œ)**
   æœåŠ¡å™¨å¯åŠ¨åï¼Œ**å¿…é¡»å…ˆè®¿é—®ä»¥ä¸‹åœ°å€**åˆ›å»ºé»˜è®¤ç®¡ç†å‘˜è´¦æˆ·ï¼Œå¦åˆ™æ— æ³•ç™»å½•åå°ï¼š
   ```
   http://localhost:8788/api/setup
   ```
   
   **é»˜è®¤å‡­æ®:**
   - **ç”¨æˆ·å**: `admin`
   - **å¯†ç **: `admin`
   
   > âš ï¸ **é‡è¦æç¤º**: å¦‚æœç™»å½•æ—¶æç¤º 401 Unauthorizedï¼Œè¯·ç¡®ä¿å·²æ‰§è¡Œæ­¤åˆå§‹åŒ–æ­¥éª¤ã€‚

## ğŸš€ éƒ¨ç½²

### 1. åˆ›å»º Cloudflare èµ„æº

**D1 æ•°æ®åº“:**
```bash
npx wrangler d1 create minav-db
```
*è¯·è®°å½•è¾“å‡ºä¸­çš„ `database_id`ã€‚*

**KV å‘½åç©ºé—´:**
```bash
npx wrangler kv:namespace create minav-kv
```
*è¯·è®°å½•è¾“å‡ºä¸­çš„ `id`ã€‚*

### 2. é…ç½® `wrangler.toml`

ä½¿ç”¨ä¸Šä¸€æ­¥è·å–çš„ ID æ›´æ–°æ‚¨çš„ `wrangler.toml` æ–‡ä»¶ï¼š

```toml
name = "minav"
pages_build_output_dir = "dist"

[[d1_databases]]
binding = "MINAV_DB"
database_name = "minav-db"
database_id = "<YOUR_DATABASE_ID>"

[[kv_namespaces]]
binding = "MINAV_KV"
id = "<YOUR_KV_ID>"
```

### 3. åˆå§‹åŒ–è¿œç¨‹æ•°æ®åº“

å°†æ•°æ®åº“ç»“æ„åº”ç”¨åˆ°æ‚¨çš„ç”Ÿäº§ç¯å¢ƒ D1 æ•°æ®åº“ï¼š
```bash
npx wrangler d1 execute minav-db --remote --file=./schema.sql
```

### 4. éƒ¨ç½²åˆ° Cloudflare Pages

æ„å»ºå¹¶éƒ¨ç½²åº”ç”¨ï¼š
```bash
npm run build
npx wrangler pages deploy dist
```

æˆ–è€…ï¼Œå°†æ‚¨çš„ GitHub ä»“åº“è¿æ¥åˆ° Cloudflare Pages å¹¶é…ç½®æ„å»ºè®¾ç½®ï¼š
- **æ„å»ºå‘½ä»¤**: `npm run build`
- **æ„å»ºè¾“å‡ºç›®å½•**: `dist`
- **ç¯å¢ƒå˜é‡**: æ— éœ€é…ç½® (ç»‘å®šé€šè¿‡ä»ªè¡¨ç›˜çš„ è®¾ç½® > Functions è¿›è¡Œé…ç½®)ã€‚

### 5. âš ï¸ åˆå§‹åŒ–ç®¡ç†å‘˜ (å¿…é¡»æ‰§è¡Œ)

éƒ¨ç½²å®Œæˆåï¼Œ**å¿…é¡»è®¿é—®ä»¥ä¸‹åœ°å€**æ¥åˆå§‹åŒ–ç®¡ç†å‘˜ç”¨æˆ·ï¼Œå¦åˆ™æ— æ³•ç™»å½•åå°ï¼š
```
https://<your-project>.pages.dev/api/setup
```

**é»˜è®¤å‡­æ®:**
- **ç”¨æˆ·å**: `admin`
- **å¯†ç **: `admin`

> âš ï¸ **å®‰å…¨æç¤º**: é¦–æ¬¡ç™»å½•åè¯·ç«‹å³ä¿®æ”¹é»˜è®¤å¯†ç ï¼

## ğŸ“„ è®¸å¯è¯

MIT
